(this["webpackJsonpbooking-clone-front"]=this["webpackJsonpbooking-clone-front"]||[]).push([[0],{128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),s=(a(70),a(6)),i=(a(71),a(9)),l=a(31),u=a.n(l),d=a(58),j=a.n(d),p=a.p+"static/media/logo.6ce24c58.svg",m=a(1),b=Object(i.f)((function(e){return Object(m.jsx)("div",{className:j.a.Logo,onClick:function(){e.history.push("/")},children:Object(m.jsx)("img",{src:p,alt:"Obrazek"})})})),h=a(60),O=a(61),g=a.n(O),v=function(e){return Object(m.jsx)("button",{onClick:e.clicked,className:g.a.Button,children:e.children})},f=a(32),x=a.n(f),_=Object(i.f)((function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),r=a[0],c=a[1],o=function(){c(!1)};return Object(m.jsx)("div",{children:Object(m.jsxs)(h.slide,{onStateChange:function(e){!function(e){c(e.isOpen)}(e)},isOpen:r,styles:{bmBurgerButton:{position:"fixed",width:"36px",height:"30px",left:"25px",top:"25px"},bmBurgerBars:{background:"#000000"},bmBurgerBarsHover:{background:"#a90000"},bmCrossButton:{height:"24px",width:"24px"},bmCross:{background:"#bdc3c7"},bmMenuWrap:{position:"fixed",height:"100%"},bmMenu:{background:"#373a47",padding:"2.5em 1.5em 0",fontSize:"1.15em"},bmMorphShape:{fill:"#373a47"},bmItemList:{color:"#b8b7ad",padding:"0.8em"},bmItem:{display:"inline-block"},bmOverlay:{background:"rgba(0, 0, 0, 0.3)"}},right:!0,children:[Object(m.jsx)("div",{onClick:function(){return o()},className:x.a.HamElement,children:Object(m.jsx)(v,{clicked:function(){e.history.push("/login")},children:"Sign In"})}),Object(m.jsx)("div",{onClick:function(){return o()},className:x.a.HamElement,children:Object(m.jsx)(v,{clicked:function(){e.history.push("/signup")},children:"Sign Up "})}),Object(m.jsx)("div",{onClick:function(){return o()},className:x.a.HamElement,children:e.loggedUser?Object(m.jsx)(v,{clicked:function(){e.history.push("/logout")},children:"Log Out"}):null}),Object(m.jsx)("div",{onClick:function(){return o()},className:x.a.HamElement,children:e.loggedUser?Object(m.jsx)(v,{clicked:function(){e.history.push("/add")},children:"Add ad"}):null}),Object(m.jsx)("div",{children:e.loggedUser?Object(m.jsxs)("p",{children:["Zalogowany u\u017cytkownik: ",e.loggedUser]}):null})]})})})),I=Object(i.f)((function(e){return Object(m.jsxs)("div",{className:u.a.Navbar,children:[Object(m.jsx)(b,{}),Object(m.jsxs)("div",{className:u.a.Wrapper,children:[Object(m.jsx)("div",{className:u.a.Username,children:e.loggedUser?Object(m.jsxs)("p",{children:["Zalogowany u\u017cytkownik: ",e.loggedUser]}):null}),e.children]}),Object(m.jsx)("div",{className:u.a.Hamburger,children:Object(m.jsx)(_,{loggedUser:e.loggedUser})})]})})),S=a(62),N=a.n(S),y=a(63),k=a.n(y),W=Object(i.f)((function(e){return Object(m.jsxs)("ul",{className:k.a.NavigationItems,children:[Object(m.jsx)(v,{clicked:function(){e.history.push("/login")},children:"Sign In"}),Object(m.jsx)(v,{clicked:function(){e.history.push("/signup")},children:"Sign Up "}),e.loggedUser?Object(m.jsx)(v,{clicked:function(){e.history.push("/logout")},children:"Log Out"}):null,e.loggedUser?Object(m.jsx)(v,{clicked:function(){e.history.push("/add")},children:"Add ad"}):null]})})),w=function(e){return Object(m.jsxs)(n.Fragment,{children:[Object(m.jsx)(I,{loggedUser:e.loggedUser,children:Object(m.jsx)(W,{loggedUser:e.loggedUser,setUser:e.setUser})}),Object(m.jsx)("main",{className:N.a.Content,children:e.children})]})},C=a(16),B=a.n(C),D=a(41),U=a.n(D),E=a(64),A=a(23),F=a.n(A),V=function(){var e=Object(E.a)(U.a.mark((function e(t){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:t.personalData.name.value,surname:t.personalData.surname.value,email:t.personalData.email.value,age:t.personalData.age.value,password:t.personalData.password.value,gender:t.gender.value},e.next=3,F.a.post("http://localhost:8080/signup",a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=Object(i.f)((function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)("null"),i=Object(s.a)(o,2),l=i[0],u=i[1],d=Object(n.useState)(!1),j=Object(s.a)(d,2),p=j[0],b=j[1],h=Object(n.useState)([B.a.InputElement]),O=Object(s.a)(h,2),g=O[0],v=O[1],f=Object(n.useState)([B.a.InputElement]),x=Object(s.a)(f,2),_=x[0],I=x[1],S=Object(n.useState)(""),N=Object(s.a)(S,2),y=N[0],k=N[1],W=Object(n.useState)(""),w=Object(s.a)(W,2),C=w[0],D=w[1],U=Object(n.useRef)(!0);Object(n.useEffect)((function(){U.current?U.current=!1:p&&E()}),[p]);var E=function(){var t={emailIsValid:!0,passwordIsValid:!0};console.log("check"),/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/.test(r)||(k("Email form is invalid"),g.push(B.a.Invalid),t.emailIsValid=!1),0===r.length&&(k("Email is required"),g.push(B.a.Invalid),t.emailIsValid=!1),/.{8,}/.test(l)||(D("Password is too short"),_.push(B.a.Invalid),t.passwordIsValid=!1),0===l.length&&(D("Password must not be empty"),_.push(B.a.Invalid),t.passwordIsValid=!1),t.emailIsValid&&t.passwordIsValid&&(function(e){var t={email:e.email,password:e.password};return console.log(e.email+"----"+e.password),F.a.post("http://localhost:8080/login",t).then((function(e){localStorage.setItem("user","Bearer "+e.data)})).catch((function(e){return console.log(e.response.status)}))}({email:r,password:l}).then((function(){e.setUser(r),e.history.push("/")})),localStorage.getItem("user")),b(!1)},A=function(e,t){v([B.a.InputElement]),I([B.a.InputElement]),k(""),D(""),"email"===t?c(e.target.value):"pass"===t&&u(e.target.value)};return Object(m.jsx)("div",{className:B.a.Wrapper,children:Object(m.jsxs)("form",{className:B.a.Input,onSubmit:function(t){e.setUser(!0),t.preventDefault(),b(!0)},children:[Object(m.jsxs)("div",{className:B.a.Inputs,children:[Object(m.jsx)("input",{className:g.join(" "),type:"text",placeholder:"Enter email",onChange:function(e){return A(e,"email")}}),Object(m.jsx)("p",{children:y}),Object(m.jsx)("input",{className:_.join(" "),type:"text",placeholder:"Enter password",onChange:function(e){return A(e,"pass")}}),Object(m.jsx)("p",{children:C})]}),Object(m.jsx)("button",{className:B.a.Button,type:"submit",children:"Submit"})]})})})),L=a(11),P=a(3),T=a(24),M=a.n(T),z=a(65),R=a.n(z),G=function(e){var t=[M.a.InputElement];return e.isValid||t.push(M.a.Invalid),Object(m.jsx)("div",{className:R.a.Input,children:Object(m.jsx)("input",{className:t.join(" "),placeholder:e.placeHolder,value:e.value,onChange:e.changed})})},Y=function(){var e=Object(n.useState)({name:{placeHolder:"Your name",value:"",isValid:!0,error:""},surname:{placeHolder:"Your surname",value:"",isValid:!0,error:""},email:{placeHolder:"Your email",value:"",isValid:!0,error:""},password:{placeHolder:"Your password",value:"",isValid:!0,error:""},age:{placeHolder:"Your age",value:"",isValid:!0,error:""}}),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),o=Object(s.a)(c,2),i=o[0],l=o[1],u=Object(n.useState)({hasError:!1,errorText:"",errorStatus:""}),d=Object(s.a)(u,2),j=d[0],p=d[1],b=Object(n.useState)(!1),h=Object(s.a)(b,2),O=h[0],g=h[1],v=Object(n.useState)(!1),f=Object(s.a)(v,2),x=f[0],_=f[1];Object(n.useEffect)((function(){x&&N().then((function(e){p(Object(P.a)(Object(P.a)({},j),{},{hasError:!1,errorText:e.data,errorStatus:e.status}))})).catch((function(e){p(Object(P.a)(Object(P.a)({},j),{},{hasError:!0,errorText:e.response.data,errorStatus:e.response.status})),console.log(e.response.data)})),_(!1)}),[x]);var I=function(e,t){var n=Object(P.a)({},a),c=Object(P.a)({},n[t]);c.value=e.target.value;var o=function(e,t){var a=!0,n="";"name"===t&&(a=e.length>6&&a,n="Name is too short"),"surname"===t&&(a=e.length>5&&a,n="Surname is too short"),"email"===t&&(a=/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/.test(e),n="Email is invalid");return"age"===t&&(a=!isNaN(e)&&e>0&&e<100,n="Age must be a number"),"password"===t&&(a=e.length>8,n="Password should have more than 8 characters"),{isValid:a,error:n}}(c.value,t);c.isValid=o.isValid,o.isValid?c.error="":c.error=o.error;var s=!0;for(var i in n)s=n[i].isValid&&s;g(s),r(Object(P.a)(Object(P.a)({},a),{},Object(L.a)({},t,c)))},S=function(e){l(e.target.value)},N=function(){return V({personalData:a,gender:i})},y=[];for(var k in a)y.push({id:k,config:a[k]});return Object(m.jsx)("div",{className:M.a.SignUpWrapper,children:Object(m.jsxs)("form",{className:M.a.Input,onSubmit:function(e){e.preventDefault(),_(!0),p(Object(P.a)(Object(P.a)({},j),{},{hasError:null,errorText:""}))},children:[y.map((function(e){return Object(m.jsxs)("div",{children:[Object(m.jsx)(G,{placeHolder:e.config.placeHolder,value:e.config.value,changed:function(t){I(t,e.id)},isValid:e.config.isValid}),Object(m.jsx)("p",{children:e.config.error})]},e.id)})),Object(m.jsxs)("div",{className:M.a.RadioButtons,children:[Object(m.jsx)("input",{type:"radio",id:"man",value:"man",name:"gender",onChange:S}),Object(m.jsx)("label",{htmlFor:"man",children:"Man"}),Object(m.jsx)("input",{type:"radio",id:"woman",value:"woman",name:"gender",onChange:S}),Object(m.jsx)("label",{htmlFor:"woman",children:"Woman"})]}),Object(m.jsx)("button",{className:M.a.Button,type:"submit",disabled:!O,children:"Submit"}),Object(m.jsx)("p",{className:M.a.CallbackMsg,children:j.errorText})]})})},J=Object(i.f)((function(e){return e.history.push("/"),e.setUser(null),Object(m.jsx)("div",{})})),q=a(20),Q=a.n(q),Z=a(42),K=a.n(Z),X=a(35),$=a(33),ee=function(e){return Object(m.jsxs)($.a,Object(P.a)(Object(P.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(m.jsx)($.a.Header,{closeButton:!0,children:Object(m.jsx)($.a.Title,{id:"contained-modal-title-vcenter",children:"Callback message"})}),Object(m.jsx)($.a.Body,{children:Object(m.jsx)("p",{children:e.message})})]}))},te=function(){var e=Object(n.useState)(new Date),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(new Date),o=Object(s.a)(c,2),i=o[0],l=o[1],u=Object(n.useState)(!1),d=Object(s.a)(u,2),j=d[0],p=d[1],b=Object(n.useState)(""),h=Object(s.a)(b,2),O=h[0],g=h[1],v=Object(n.useState)([]),f=Object(s.a)(v,2),x=f[0],_=f[1];Object(n.useEffect)((function(){I()}),[]);var I=function(){F.a.get("http://localhost:8080/").then((function(e){var t=[];for(var a in e.data)t.push(e.data[a]),console.log(e.data[a]);_(t),console.log(Object.entries(e.data))}))},S=localStorage.getItem("user"),N=Object(m.jsxs)("div",{children:[x.map((function(e,t){return Object(m.jsx)("div",{children:e.accommodations.map((function(t){return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:Q.a.AccommodationWrapper,children:[Object(m.jsxs)("div",{className:Q.a.DescriptionTitle,children:[Object(m.jsx)("h3",{children:t.title}),S?Object(m.jsx)("div",{className:Q.a.EditingButtons,children:Object(m.jsx)("div",{className:Q.a.DeleteButton,children:Object(m.jsx)("a",{onClick:function(){return a=e.email,n=t.id,void F.a.delete("http://localhost:8080/removeAccommodation?email="+a+"&id="+n).then((function(e){console.log(e);var t=x.map((function(e){return Object(P.a)(Object(P.a)({},e),{},{accommodations:e.accommodations.filter((function(e){return e.id!==n}))})}));_(t)}));var a,n},children:"Delete"})})}):null]}),Object(m.jsx)("div",{className:Q.a.ImageWrapper,children:Object(m.jsx)("img",{src:t.imageUrl,alt:"Obrazek"})}),Object(m.jsxs)("div",{className:Q.a.DetailsWrapper,children:[Object(m.jsx)("div",{className:Q.a.DescriptionWrapper,children:Object(m.jsx)("span",{children:t.description})}),Object(m.jsxs)("div",{className:Q.a.NavWrapper,children:[Object(m.jsxs)("div",{className:"DateTimePicker",children:[Object(m.jsx)(K.a,{value:a,onChange:r}),Object(m.jsx)(K.a,{value:i,onChange:l})]}),Object(m.jsx)("div",{className:"Button",children:Object(m.jsx)(X.a,{onClick:function(){return function(e){var t={startDate:a,endDate:i,accommodationId:e};F.a.post("http://localhost:8080/book",t).then((function(e){console.log(e),g(e.data),p(!0)}))}(t.id)},variant:"primary",children:"Book"})})]}),Object(m.jsx)("div",{className:Q.a.PriceWrapper,children:Object(m.jsxs)("h3",{children:[t.price,"z\u0142"]})})]})]})},e.name)}))},e.id)})),Object(m.jsx)(ee,{show:j,onHide:function(){p(!1)},message:O})]});return x||(N=Object(m.jsx)("p",{children:"Loading..."})),Object(m.jsx)("div",{children:N})},ae=a(44),ne=a.n(ae),re=a(25),ce=Object(i.f)((function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(""),l=Object(s.a)(o,2),u=l[0],d=l[1],j=Object(n.useState)(""),p=Object(s.a)(j,2),b=p[0],h=p[1],O=Object(n.useState)(""),g=Object(s.a)(O,2),v=g[0],f=g[1],x=Object(n.useState)(""),_=Object(s.a)(x,2),I=_[0],S=_[1],N=Object(m.jsx)("div",{children:Object(m.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a=new FormData;a.append("file",r),a.append("upload_preset","unsigned"),a.append("cloud_name","dantecloudinary"),fetch("https://api.cloudinary.com/v1_1/dantecloudinary/image/upload",{method:"post",body:a}).then((function(e){return e.json()})).then((function(t){var a={imageUrl:t.url,description:b,title:v,price:I};F.a.post("http://localhost:8080/addAccommodation",a,{headers:{Authorization:localStorage.getItem("user")}}).then((function(t){console.log(t),e.history.push("/")}))})).catch((function(e){return console.log(e)}))},className:ne.a.addAccommodationWrapper,children:[Object(m.jsx)(re.a.Group,{controlId:"formFile",className:"mb-3",children:Object(m.jsx)(re.a.Control,{onChange:function(e){e.preventDefault(),c(e.target.files[0]),d(URL.createObjectURL(e.target.files[0]))},type:"file"})}),Object(m.jsx)("div",{className:ne.a.ImageWrapper,children:r?Object(m.jsx)("img",{src:u}):null}),Object(m.jsx)(re.a.Group,{className:"mb-3",controlId:"formGridAddress1",children:Object(m.jsx)(re.a.Control,{onChange:function(e){e.preventDefault(),f(e.target.value)},placeholder:"Title"})}),Object(m.jsx)(re.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:Object(m.jsx)(re.a.Control,{onChange:function(e){e.preventDefault(),h(e.target.value)},as:"textarea",rows:3,placeholder:"Description"})}),Object(m.jsx)(re.a.Group,{className:"mb-3",controlId:"formGridAddress1",children:Object(m.jsx)(re.a.Control,{onChange:function(e){e.preventDefault(),S(e.target.value)},placeholder:"Price"})}),Object(m.jsx)(X.a,{type:"submit",variant:"primary",children:"Dodaj"})]})});return localStorage.getItem("user")||(N=Object(m.jsx)(i.a,{to:"/login"})),Object(m.jsx)("div",{children:N})}));a(126);var oe=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(m.jsxs)(w,{loggedUser:a,setUser:r,children:[Object(m.jsx)(i.b,{path:"/",exact:!0,component:te}),Object(m.jsx)(i.b,{path:"/signup",component:Y}),Object(m.jsx)(i.b,{path:"/login",children:Object(m.jsx)(H,{setUser:r})}),Object(m.jsx)(i.b,{path:"/logout",children:Object(m.jsx)(J,{setUser:r})}),Object(m.jsx)(i.b,{path:"/add",component:ce})]})},se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,131)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))},ie=a(18);o.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(ie.a,{children:Object(m.jsx)(oe,{})})}),document.getElementById("root")),se()},16:function(e,t,a){e.exports={Wrapper:"SignInFormStyles_Wrapper__2-qbD",Input:"SignInFormStyles_Input__2PHan",Label:"SignInFormStyles_Label__281Rk",InputElement:"SignInFormStyles_InputElement__16xmf",Invalid:"SignInFormStyles_Invalid__4WlQO",Inputs:"SignInFormStyles_Inputs__38j9t",Button:"SignInFormStyles_Button__3kGJk"}},20:function(e,t,a){e.exports={AccommodationWrapper:"AccommodationWrapper_AccommodationWrapper__iyROu",ImageWrapper:"AccommodationWrapper_ImageWrapper__3zWnv",DescriptionWrapper:"AccommodationWrapper_DescriptionWrapper__2GvMY",DescriptionTitle:"AccommodationWrapper_DescriptionTitle__159Ke",DetailsWrapper:"AccommodationWrapper_DetailsWrapper__m87F0",NavWrapper:"AccommodationWrapper_NavWrapper__1kV_S",PriceWrapper:"AccommodationWrapper_PriceWrapper__3Xy-6",Button:"AccommodationWrapper_Button__1B-k_",EditingButtons:"AccommodationWrapper_EditingButtons__1MyJ9",DeleteButton:"AccommodationWrapper_DeleteButton__2Tq54"}},24:function(e,t,a){e.exports={Input:"FormStyle_Input__35j2W",Button:"FormStyle_Button__vaN9h",CallbackMsg:"FormStyle_CallbackMsg__n7Zyz",Label:"FormStyle_Label__3Dkoh",InputElement:"FormStyle_InputElement__3Lh7E",Invalid:"FormStyle_Invalid__1aShc",RadioButtons:"FormStyle_RadioButtons__2NXYv",SignUpWrapper:"FormStyle_SignUpWrapper__yUeuP"}},31:function(e,t,a){e.exports={Navbar:"Navbar_Navbar__2bNmD",Wrapper:"Navbar_Wrapper__I5ztP",Username:"Navbar_Username__3SY4z",Hamburger:"Navbar_Hamburger__1d3vU"}},32:function(e,t,a){e.exports={List:"HamburgerMenu_List__2vEmQ",HamElement:"HamburgerMenu_HamElement__1fgFw"}},44:function(e,t,a){e.exports={addAccommodationWrapper:"AddAccommodation_addAccommodationWrapper__QxdRC",ImageWrapper:"AddAccommodation_ImageWrapper__2Vfm5"}},58:function(e,t,a){e.exports={Logo:"Logo_Logo__1EJVK"}},61:function(e,t,a){e.exports={Button:"Button_Button__2OrpP"}},62:function(e,t,a){e.exports={Content:"BookingClone_Content__2vSP3"}},63:function(e,t,a){e.exports={NavigationItems:"NavigationItem_NavigationItems__1fFcu",NavigationItem:"NavigationItem_NavigationItem__2isv8"}},65:function(e,t,a){e.exports={Input:"Input_Input__BgoeP"}},70:function(e,t,a){},71:function(e,t,a){}},[[128,1,2]]]);
//# sourceMappingURL=main.9fb141fd.chunk.js.map